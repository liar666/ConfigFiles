#!/bin/bash

set -u

MAXB=1.0  ## unfortunately we cannot put >1.0 here with increment of .5 (not supported by xrandr!)
MINB=0.1

GAMMA=1.0:1.0:.6
BRIGHT=.90
VGA=DP1
LVDS=eDP1

if [[ $# == 1 ]]
then
    BRIGHT=$1
elif [[ $# == 2 ]]
then
    BRIGHT=$1
    GAMMA=$2
else
    echo "!!! USING DEFAULT VALUES!!!"
    echo "USAGE: $0 <brightness: .90> [<gamma: 1.0:1.0:.6>]"
fi

(( $(bc -l <<< "${BRIGHT} > ${MAXB}") )) && BRIGHT=${MAXB}
(( $(bc -l <<< "${BRIGHT} < ${MINB}") )) && BRIGHT=${MINB}

echo "Setting brightness to ${BRIGHT}"
xrandr --output ${VGA}  --brightness ${BRIGHT} --gamma ${GAMMA}
xrandr --output ${LVDS} --brightness ${BRIGHT} --gamma ${GAMMA}
